listener 1883
allow_anonymous true

# Connection persistence settings to prevent premature disconnects
persistence true
persistence_location /mosquitto/data/

# Keep connections alive longer
keepalive_interval 60
max_connections -1

# Client settings
max_inflight_messages 100
max_queued_messages 1000

# Timeouts
connection_messages true
retry_interval 20

listener 9001
protocol websockets
allow_anonymous true
